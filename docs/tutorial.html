

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; nanobench  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Test Set" href="comparison.html" />
    <link rel="prev" title="nanobench" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> nanobench
          

          
            
            <img src="_static/nanobench-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                4.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="#quick-start">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#something-fast">Something Fast</a></li>
<li class="toctree-l2"><a class="reference internal" href="#something-slow">Something Slow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#something-unstable">Something Unstable</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#comparing-results">Comparing Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="#asymptotic-complexity">Asymptotic Complexity</a></li>
<li class="toctree-l1"><a class="reference internal" href="#rendering-mustache-like-templates">Rendering Mustache-like Templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#csv-comma-separated-values">CSV - Comma-Separated Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#html-box-plots">HTML Box Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="#json-javascript-object-notation">JSON - JavaScript Object Notation</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Comparison</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="comparison.html">Test Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison.html#runtime">Runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison.html#implementations-output">Implementations &amp; Output</a><ul>
<li class="toctree-l2"><a class="reference internal" href="comparison.html#nanobench">nanobench</a><ul>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#sourcecode">Sourcecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#results">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html#google-benchmark">Google Benchmark</a><ul>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id2">Sourcecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id3">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html#nonius">nonius</a><ul>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id5">Sourcecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id6">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html#picobench">Picobench</a><ul>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id8">Sourcecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id9">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html#catch2">Catch2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id11">Sourcecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id12">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html#moodycamel-microbench">moodycamel::microbench</a><ul>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id14">Sourcecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id15">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html#sltbench">sltbench</a><ul>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id17">Sourcecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="comparison.html#id18">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html#celero">Celero</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html#folly-benchmark">folly Benchmark</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html"><code class="docutils literal notranslate"><span class="pre">ankerl::nanobench</span></code> Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference.html#bench-main-entry-point"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Bench</span></code> - Main Entry Point</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#rng-extremely-fast-prng"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Rng</span></code> - Extremely fast PRNG</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#result-benchmark-results"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Result</span></code> - Benchmark Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#donotoptimizeaway"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">doNotOptimizeAway()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#render-mustache-like-templates"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">render()</span></code> - Mustache-like Templates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference.html#templates-csv"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">templates::csv</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html#templates-htmlboxplot"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">templates::htmlBoxplot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html#templates-json"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">templates::json</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#environment-variables">Environment Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference.html#nanobench-endless"><code class="docutils literal notranslate"><span class="pre">NANOBENCH_ENDLESS</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>
<p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">MIT License</a></li>
<li class="toctree-l1"><a class="reference internal" href="CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CODE_OF_CONDUCT.html#our-pledge">Our Pledge</a></li>
<li class="toctree-l2"><a class="reference internal" href="CODE_OF_CONDUCT.html#our-standards">Our Standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="CODE_OF_CONDUCT.html#enforcement-responsibilities">Enforcement Responsibilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="CODE_OF_CONDUCT.html#scope">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="CODE_OF_CONDUCT.html#enforcement">Enforcement</a></li>
<li class="toctree-l2"><a class="reference internal" href="CODE_OF_CONDUCT.html#enforcement-guidelines">Enforcement Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="CODE_OF_CONDUCT.html#correction">1. Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="CODE_OF_CONDUCT.html#warning">2. Warning</a></li>
<li class="toctree-l3"><a class="reference internal" href="CODE_OF_CONDUCT.html#temporary-ban">3. Temporary Ban</a></li>
<li class="toctree-l3"><a class="reference internal" href="CODE_OF_CONDUCT.html#permanent-ban">4. Permanent Ban</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CODE_OF_CONDUCT.html#attribution">Attribution</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">nanobench</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/martinus/nanobench/blob/master/src/docs/tutorial.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Download <code class="docutils literal notranslate"><span class="pre">nanobench.h</span></code> from the <a class="reference download external" download="" href="https://github.com/martinus/nanobench/releases/latest"><code class="xref download docutils literal notranslate"><span class="pre">release</span></code></a>
and make it available in your project.</p>
</div>
<div class="section" id="quick-start">
<h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<ol class="arabic">
<li><p>Create a .cpp file, e.g. <code class="docutils literal notranslate"><span class="pre">nanobench.cpp</span></code>, where the bulk of nanobench is compiled.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">nanobench.cpp</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#define ANKERL_NANOBENCH_IMPLEMENT</span>
<span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
</pre></div>
</td></tr></table></div>
</div>
</li>
<li><p>Compile e.g. with <code class="docutils literal notranslate"><span class="pre">g++</span> <span class="pre">-O3</span> <span class="pre">-I../include</span> <span class="pre">-c</span> <span class="pre">nanobench.cpp</span></code>. This compiles
the bulk of nanobench, and took 2.4 seconds on my machine. It needs to be compiled only once whenever you upgrade nanobench.</p></li>
<li><p>Create the actual benchmark code, in <code class="docutils literal notranslate"><span class="pre">full_example.cpp</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">full_example.cpp</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;atomic&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">atomic</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">x</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span><span class="p">().</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;compare_exchange_strong&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]</span> <span class="p">{</span>
        <span class="n">x</span><span class="p">.</span><span class="n">compare_exchange_strong</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The most important entry entry point is <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench5BenchE" title="ankerl::nanobench::Bench"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ankerl::nanobench::Bench</span></code></a>. It creates a benchmarking object,
optionally configures it, and then runs the code to benchmark with <a class="reference internal" href="reference.html#_CPPv4I0EN6ankerl9nanobench5Bench3runER5BenchPKcRR2Op" title="ankerl::nanobench::Bench::run"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">run()</span></code></a>.</p>
</li>
<li><p>Compile and link the example with</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>g++ -O3 -I../include nanobench.o full_example.cpp -o full_example
</pre></div>
</div>
<p>This takes just 0.28 seconds on my machine.</p>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">./full_example</span></code>, which gives an output like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark
|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------
|                5.63 |      177,595,338.98 |    0.0% |            3.00 |           17.98 |  0.167 |           1.00 |    0.1% |      0.00 | `compare_exchange_strong`
</pre></div>
</div>
<p>Which renders as</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 6%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 10%" />
<col style="width: 6%" />
<col style="width: 7%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ns/op</p></th>
<th class="head"><p>op/s</p></th>
<th class="head"><p>err%</p></th>
<th class="head"><p>ins/op</p></th>
<th class="head"><p>cyc/op</p></th>
<th class="head"><p>IPC</p></th>
<th class="head"><p>bra/op</p></th>
<th class="head"><p>miss%</p></th>
<th class="head"><p>total</p></th>
<th class="head"><p>benchmark</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>5.63</p></td>
<td><p>177,595,338.98</p></td>
<td><p>0.0%</p></td>
<td><p>3.00</p></td>
<td><p>17.98</p></td>
<td><p>0.167</p></td>
<td><p>1.00</p></td>
<td><p>0.1%</p></td>
<td><p>0.00</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">compare_exchange_strong</span></code></p></td>
</tr>
</tbody>
</table>
<p>Which means that one <code class="docutils literal notranslate"><span class="pre">x.compare_exchange_strong(y,</span> <span class="pre">0);</span></code> call takes
5.63ns on my machine, or ~178 million operations per second. Runtime
fluctuates by around 0.0%, so the results are very stable. Each call
required 3 instructions, which took ~18 CPU cycles. There was a single branch per call,
with only 0.1% misspredicted.</p>
</li>
</ol>
<p>In the remaining examples, I’m using <a class="reference external" href="https://github.com/onqtam/doctest">doctest</a> as a unit test framework, which is like <a class="reference external" href="https://github.com/catchorg/Catch2">Catch2</a> - but
compiles much faster. It pairs well with nanobench.</p>
</div>
<div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="something-fast">
<h2>Something Fast<a class="headerlink" href="#something-fast" title="Permalink to this headline">¶</a></h2>
<p>Let’s benchmarks how fast we can do <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+=</span> <span class="pre">x</span></code> for <code class="docutils literal notranslate"><span class="pre">uint64_t</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">tutorial_fast_v1.cpp</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thirdparty/doctest/doctest.h&gt;</span><span class="cp"></span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;tutorial_fast_v1&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">uint64_t</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span><span class="p">().</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;++x&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]()</span> <span class="p">{</span>
        <span class="o">++</span><span class="n">x</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>After 0.2ms we get this output:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|               ns/op |                op/s |    err% |     total | benchmark
|--------------------:|--------------------:|--------:|----------:|:----------
|                   - |                   - |       - |         - | :boom: `++x` (iterations overflow. Maybe your code got optimized away?)
</pre></div>
</div>
<p>No data there! we only get <code class="docutils literal notranslate"><span class="pre">:boom:</span> <span class="pre">iterations</span> <span class="pre">overflow.</span></code>.  The compiler could optimize <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+=</span> <span class="pre">x</span></code>
away because we never used the output. Thanks to <code class="docutils literal notranslate"><span class="pre">doNotOptimizeAway</span></code>, this is easy to fix:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">tutorial_fast_v2.cpp</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thirdparty/doctest/doctest.h&gt;</span><span class="cp"></span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;tutorial_fast_v2&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">uint64_t</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span><span class="p">().</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;++x&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]()</span> <span class="p">{</span>
<span class="hll">        <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">doNotOptimizeAway</span><span class="p">(</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">);</span>
</span>    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>This time the benchmark runs for 2.2ms and we actually get reasonable data:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark
|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------
|                0.31 |    3,192,444,232.50 |    0.0% |            1.00 |            1.00 |  0.998 |           0.00 |    0.0% |      0.00 | `++x`
</pre></div>
</div>
<p>It’s a very stable result. One run the op/s is 3,192 million/sec, the next time I execute it I get 3,168 million/sec. It always takes
1.00 instructions per operation on my machine, and can do this in ~1 cycle.</p>
</div>
<div class="section" id="something-slow">
<h2>Something Slow<a class="headerlink" href="#something-slow" title="Permalink to this headline">¶</a></h2>
<p>Let’s benchmark if sleeping for 100ms really takes 100ms.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">tutorial_slow_v1.cpp</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thirdparty/doctest/doctest.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp"></span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;tutorial_slow_v1&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span><span class="p">().</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;sleep 100ms, auto&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>After 1.1 seconds I get</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark
|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:---------------------
|      100,125,753.00 |                9.99 |    0.0% |           51.00 |        7,714.00 |  0.007 |          11.00 |   90.9% |      1.10 | `sleep 100ms, auto`
</pre></div>
</div>
<p>So we actually take 100.125ms instead of 100ms. Next time I run it, I get 100.141. Also a very stable result. Interestingly, sleep takes 51 instructions but 7,714 cycles - so we only got 0.007 instructions per cycle. That’s extremely low, but expected of <code class="docutils literal notranslate"><span class="pre">sleep</span></code>. It also required 11 branches, of which 90.9% were misspredicted on average.</p>
<p>If the extremely slow 1.1 second is too much for you, you can manually configure the number of evaluations (epochs):</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">tutorial_slow_v2.cpp</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thirdparty/doctest/doctest.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp"></span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;tutorial_slow_v2&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span><span class="p">().</span><span class="n">epochs</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;sleep 100ms&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark
|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------
|      100,099,096.00 |                9.99 |    0.0% |           51.00 |        7,182.00 |  0.007 |          11.00 |   90.9% |      0.30 | `sleep 100ms`
</pre></div>
</div>
<p>This time it took only 0.3 seconds, but with only 3 evaluations instead of 11. The err% will be less meaningfull, but since the benchmark is so stable it doesn’t really matter.</p>
</div>
<div class="section" id="something-unstable">
<h2>Something Unstable<a class="headerlink" href="#something-unstable" title="Permalink to this headline">¶</a></h2>
<p>Lets create an extreme artifical test that’s hard to benchmark, because runtime fluctuates randomly: Each iteration
randomly skip between 0-254 random numbers:</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">tutorial_fluctuating_v1.cpp</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thirdparty/doctest/doctest.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;random&gt;</span><span class="cp"></span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;tutorial_fluctuating_v1&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">random_device</span> <span class="n">dev</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">mt19937_64</span> <span class="n">rng</span><span class="p">(</span><span class="n">dev</span><span class="p">());</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span><span class="p">().</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;random fluctuations&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]</span> <span class="p">{</span>
        <span class="c1">// each run, perform a random number of rng calls</span>
        <span class="k">auto</span> <span class="n">iterations</span> <span class="o">=</span> <span class="n">rng</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">UINT64_C</span><span class="p">(</span><span class="mh">0xff</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">uint64_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">iterations</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">doNotOptimizeAway</span><span class="p">(</span><span class="n">rng</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>After 2.3ms, I get this result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark
|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------
|              334.12 |        2,992,911.53 |    6.3% |        3,486.44 |        1,068.67 |  3.262 |         287.86 |    0.7% |      0.00 | :wavy_dash: `random fluctuations` (Unstable with ~56.7 iters. Increase `minEpochIterations` to e.g. 567)
</pre></div>
</div>
<p>So on average each loop takes about 334.12ns, but we get a warning that the results are unstable. The median percentage error is 6.3% which is quite high,</p>
<p>Let’s use the suggestion and set the minimum number of iterations to 5000, and try again:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">tutorial_fluctuating_v2.cpp</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thirdparty/doctest/doctest.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;random&gt;</span><span class="cp"></span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;tutorial_fluctuating_v2&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">random_device</span> <span class="n">dev</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">mt19937_64</span> <span class="n">rng</span><span class="p">(</span><span class="n">dev</span><span class="p">());</span>
<span class="hll">    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span><span class="p">().</span><span class="n">minEpochIterations</span><span class="p">(</span><span class="mi">5000</span><span class="p">).</span><span class="n">run</span><span class="p">(</span>
</span>        <span class="s">&quot;random fluctuations&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]</span> <span class="p">{</span>
            <span class="c1">// each run, perform a random number of rng calls</span>
            <span class="k">auto</span> <span class="n">iterations</span> <span class="o">=</span> <span class="n">rng</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">UINT64_C</span><span class="p">(</span><span class="mh">0xff</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">uint64_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">iterations</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">doNotOptimizeAway</span><span class="p">(</span><span class="n">rng</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The fluctuations are much better:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark
|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------
|              277.31 |        3,606,106.48 |    0.7% |        3,531.75 |          885.18 |  3.990 |         291.59 |    0.7% |      0.00 | `random fluctuations`
</pre></div>
</div>
<p>The results are  more stable, with only 0.7% error.</p>
</div>
</div>
<div class="section" id="comparing-results">
<span id="tutorial-comparing-results"></span><h1>Comparing Results<a class="headerlink" href="#comparing-results" title="Permalink to this headline">¶</a></h1>
<p>I have implemented a comparison of multiple random number generators.
Here several RNGs are compared to a baseline calculated from <cite>std::default_random_engine</cite>.
I factored out the general benchmarking code so it’s easy to use for each of the random number generators:</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">example_random_number_generators.cpp (excerpt)</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="p">{</span>

<span class="c1">// Benchmarks how fast we can get 64bit random values from Rng.</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Rng</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">bench</span><span class="p">(</span><span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span><span class="o">*</span> <span class="n">bench</span><span class="p">,</span> <span class="kt">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">random_device</span> <span class="n">dev</span><span class="p">;</span>
    <span class="n">Rng</span> <span class="nf">rng</span><span class="p">(</span><span class="n">dev</span><span class="p">());</span>

    <span class="n">bench</span><span class="o">-&gt;</span><span class="n">run</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]()</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">r</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">uniform_int_distribution</span><span class="o">&lt;</span><span class="kt">uint64_t</span><span class="o">&gt;</span><span class="p">{}(</span><span class="n">rng</span><span class="p">);</span>
        <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">doNotOptimizeAway</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="p">}</span> <span class="c1">// namespace</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;example_random_number_generators&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// perform a few warmup calls, and since the runtime is not always stable</span>
    <span class="c1">// for each generator, increase the number of epochs to get more accurate</span>
    <span class="c1">// numbers.</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">b</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">&quot;Random Number Generators&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">unit</span><span class="p">(</span><span class="s">&quot;uint64_t&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">warmup</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="p">.</span><span class="n">relative</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
    <span class="n">b</span><span class="p">.</span><span class="n">performanceCounters</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>

    <span class="c1">// sets the first one as the baseline</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">default_random_engine</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;std::default_random_engine&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mt19937</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;std::mt19937&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mt19937_64</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;std::mt19937_64&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">ranlux24_base</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;std::ranlux24_base&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">ranlux48_base</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;std::ranlux48_base&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">ranlux24</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;std::ranlux24_base&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">ranlux48</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;std::ranlux48&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">knuth_b</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;std::knuth_b&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">WyRng</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;WyRng&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">NasamRng</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;NasamRng&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">Sfc4</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;Sfc4&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">RomuTrio</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;RomuTrio&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">RomuDuo</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;RomuDuo&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">RomuDuoJr</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;RomuDuoJr&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">Orbit</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;Orbit&quot;</span><span class="p">);</span>
    <span class="n">bench</span><span class="o">&lt;</span><span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Rng</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="s">&quot;ankerl::nanobench::Rng&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Runs for 60ms and prints this table:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>| relative |         ns/uint64_t |          uint64_t/s |    err% |    ins/uint64_t |    cyc/uint64_t |    IPC |   bra/uint64_t |   miss% |     total | Random Number Generators
|---------:|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:-------------------------
|   100.0% |               35.87 |       27,881,924.28 |    2.3% |          127.80 |          114.61 |  1.115 |           9.77 |    3.7% |      0.00 | `std::default_random_engine`
|   490.3% |                7.32 |      136,699,693.21 |    0.6% |           89.55 |           23.49 |  3.812 |           9.51 |    0.1% |      0.00 | `std::mt19937`
| 1,767.4% |                2.03 |      492,786,582.33 |    0.6% |           24.38 |            6.48 |  3.761 |           1.26 |    0.6% |      0.00 | `std::mt19937_64`
|    85.2% |               42.08 |       23,764,853.03 |    0.7% |          157.07 |          134.62 |  1.167 |          19.51 |    7.6% |      0.00 | `std::ranlux24_base`
|   121.3% |               29.56 |       33,824,759.51 |    0.5% |           91.03 |           94.35 |  0.965 |          10.00 |    8.1% |      0.00 | `std::ranlux48_base`
|    17.4% |              205.67 |        4,862,080.59 |    1.2% |          709.83 |          657.10 |  1.080 |         101.79 |   16.1% |      0.00 | `std::ranlux24_base`
|     8.7% |              412.46 |        2,424,497.97 |    1.8% |        1,514.70 |        1,318.43 |  1.149 |         219.09 |   16.7% |      0.00 | `std::ranlux48`
|    59.2% |               60.60 |       16,502,276.18 |    1.9% |          253.77 |          193.39 |  1.312 |          24.93 |    1.5% |      0.00 | `std::knuth_b`
| 5,187.1% |                0.69 |    1,446,254,071.66 |    0.1% |            6.00 |            2.21 |  2.714 |           0.00 |    0.0% |      0.00 | `WyRng`
| 1,431.7% |                2.51 |      399,177,833.54 |    0.0% |           21.00 |            8.01 |  2.621 |           0.00 |    0.0% |      0.00 | `NasamRng`
| 2,629.9% |                1.36 |      733,279,957.30 |    0.1% |           13.00 |            4.36 |  2.982 |           0.00 |    0.0% |      0.00 | `Sfc4`
| 3,815.7% |                0.94 |    1,063,889,655.17 |    0.0% |           11.00 |            3.01 |  3.661 |           0.00 |    0.0% |      0.00 | `RomuTrio`
| 3,529.5% |                1.02 |      984,102,081.37 |    0.3% |            9.00 |            3.25 |  2.768 |           0.00 |    0.0% |      0.00 | `RomuDuo`
| 4,580.4% |                0.78 |    1,277,113,402.06 |    0.0% |            7.00 |            2.50 |  2.797 |           0.00 |    0.0% |      0.00 | `RomuDuoJr`
| 2,291.2% |                1.57 |      638,820,992.09 |    0.0% |           11.00 |            5.00 |  2.200 |           0.00 |    0.0% |      0.00 | `ankerl::nanobench::Rng`
</pre></div>
</div>
<p>It shows that <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench3RngE" title="ankerl::nanobench::Rng"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ankerl::nanobench::Rng</span></code></a> is one of the fastest RNG, and has the least amount of
fluctuation. It takes only 1.57ns to generate a random <code class="docutils literal notranslate"><span class="pre">uint64_t</span></code>, so ~638 million calls per
seconds are possible. To the left we show relative performance compared to <code class="docutils literal notranslate"><span class="pre">std::default_random_engine</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here pure runtime performance is not necessarily the best benchmark.
Especially the fastest RNG’s can be inlined and use instruction level parallelism
to their advantage: they immediately return an old state, and while user code can
already use that value, the next value is calculated in parallel. See the excellent paper
at <a class="reference external" href="http://www.romu-random.org">romu-random</a> for details.</p>
</div>
</div>
<div class="section" id="asymptotic-complexity">
<span id="id1"></span><h1>Asymptotic Complexity<a class="headerlink" href="#asymptotic-complexity" title="Permalink to this headline">¶</a></h1>
<p>It is possible to calculate asymptotic complexity (Big O) from multiple runs of a benchmark. Run the
benchmark with different complexity N, then nanobench can calculate the best fitting curve.</p>
<p>The following example finds out the asymptotic complexity of <code class="docutils literal notranslate"><span class="pre">std::set</span></code>’s <code class="docutils literal notranslate"><span class="pre">find()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">tutorial_complexity_set.cpp</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thirdparty/doctest/doctest.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;set&gt;</span><span class="cp"></span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;tutorial_complexity_set_find&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Create a single benchmark instance that is used in multiple benchmark</span>
    <span class="c1">// runs, with different settings for complexityN.</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span> <span class="n">bench</span><span class="p">;</span>

    <span class="c1">// a RNG to generate input data</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Rng</span> <span class="n">rng</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="kt">uint64_t</span><span class="o">&gt;</span> <span class="n">set</span><span class="p">;</span>

    <span class="c1">// Running the benchmark multiple times, with different number of elements</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">setSize</span> <span class="p">:</span>
         <span class="p">{</span><span class="mi">10U</span><span class="p">,</span> <span class="mi">20U</span><span class="p">,</span> <span class="mi">50U</span><span class="p">,</span> <span class="mi">100U</span><span class="p">,</span> <span class="mi">200U</span><span class="p">,</span> <span class="mi">500U</span><span class="p">,</span> <span class="mi">1000U</span><span class="p">,</span> <span class="mi">2000U</span><span class="p">,</span> <span class="mi">5000U</span><span class="p">,</span> <span class="mi">10000U</span><span class="p">})</span> <span class="p">{</span>

        <span class="c1">// fill up the set with random data</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">set</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">setSize</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">set</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">rng</span><span class="p">());</span>
        <span class="p">}</span>

        <span class="c1">// Run the benchmark, provide setSize as the scaling variable.</span>
        <span class="n">bench</span><span class="p">.</span><span class="n">complexityN</span><span class="p">(</span><span class="n">set</span><span class="p">.</span><span class="n">size</span><span class="p">()).</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;std::set find&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]</span> <span class="p">{</span>
            <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">doNotOptimizeAway</span><span class="p">(</span><span class="n">set</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">rng</span><span class="p">()));</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="c1">// calculate BigO complexy best fit and print the results</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">bench</span><span class="p">.</span><span class="n">complexityBigO</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The loop runs the benchmark 10 times, with different set sizes from 10 to 10k.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each of the 10 benchmark runs automatically scales the number of iterations so results are still
fast and accurate. In total the whole test takes about 90ms.</p>
</div>
<p>The <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench5BenchE" title="ankerl::nanobench::Bench"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Bench</span></code></a> object holds the benchmark results of the 10 benchmark runs. Each benchmark is recorded with a
different setting for <a class="reference internal" href="reference.html#_CPPv4I0EN6ankerl9nanobench5Bench11complexityNER5Bench1T" title="ankerl::nanobench::Bench::complexityN"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">complexityN</span></code></a>.</p>
<p>After the benchmark prints the benchmark results, we calculate &amp; print the Big O of the most important complexity functions.
<code class="docutils literal notranslate"><span class="pre">std::cout</span> <span class="pre">&lt;&lt;</span> <span class="pre">bench.complexityBigO()</span> <span class="pre">&lt;&lt;</span> <span class="pre">std::endl;</span></code> prints e.g. this markdown table:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|   coefficient |   err% | complexity
|--------------:|-------:|------------
|   6.66562e-09 |  29.1% | O(log n)
|   1.47588e-11 |  58.3% | O(n)
|   1.10742e-12 |  62.6% | O(n log n)
|   5.15683e-08 |  63.8% | O(1)
|   1.40387e-15 |  78.7% | O(n^2)
|   1.32792e-19 |  85.7% | O(n^3)
</pre></div>
</div>
<p>The table is sorted, best fitting complexity function first. So
<span class="math notranslate nohighlight">\(\mathcal{O}(\log{}n)\)</span> provides the best approximation for the complexity. Interestingly, in that case error compared to
<span class="math notranslate nohighlight">\(\mathcal{O}(n)\)</span> is not very large, which can be an indication that even though the red-black tree should theoretically have
logarithmic complexity, in practices that is not perfectly the case.</p>
</div>
<div class="section" id="rendering-mustache-like-templates">
<span id="templating"></span><h1>Rendering Mustache-like Templates<a class="headerlink" href="#rendering-mustache-like-templates" title="Permalink to this headline">¶</a></h1>
<p>Nanobench comes with a powerful <a class="reference external" href="https://mustache.github.io/">Mustache</a>-like template mechanism to process the benchmark
results into all kinds of formats. You can find a full description of all possible tags at <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench6renderEPKcRK5BenchRNSt7ostreamE" title="ankerl::nanobench::render"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ankerl::nanobench::render()</span></code></a>.</p>
<p>Several preconfigured format exist in the namespace <code class="docutils literal notranslate"><span class="pre">ankerl::nanobench::templates</span></code>. Rendering these templates can be done
with either <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench6renderEPKcRK5BenchRNSt7ostreamE" title="ankerl::nanobench::render"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ankerl::nanobench::render()</span></code></a>, or directly with <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench5Bench6renderEPKcRNSt7ostreamE" title="ankerl::nanobench::Bench::render"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ankerl::nanobench::Bench::render()</span></code></a>.</p>
<p>The following example shows how to use the <a class="reference internal" href="#csv-comma-separated-values">CSV - Comma-Separated Values</a> template, without writing the standard output.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">tutorial_render_simple.cpp</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thirdparty/doctest/doctest.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;atomic&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;tutorial_render_simple&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">atomic</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">x</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span><span class="p">()</span>
<span class="hll">        <span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
</span>        <span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;std::vector&quot;</span><span class="p">,</span>
             <span class="p">[</span><span class="o">&amp;</span><span class="p">]</span> <span class="p">{</span>
                 <span class="o">++</span><span class="n">x</span><span class="p">;</span>
             <span class="p">})</span>
<span class="hll">        <span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">templates</span><span class="o">::</span><span class="n">csv</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<p>In line 11 we call <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench5Bench6outputEPNSt7ostreamE" title="ankerl::nanobench::Bench::output"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Bench::output()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>, thus disabling the standard output.</p>
<p>After the benchmark we directly call <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench5Bench6renderEPKcRNSt7ostreamE" title="ankerl::nanobench::Bench::render"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Bench::render()</span></code></a> in line 16. Here we use the
CSV template, and write the rendered output to <code class="docutils literal notranslate"><span class="pre">std::cout</span></code>. When running, we get just the CSV output to the console which looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;title&quot;;&quot;name&quot;;&quot;unit&quot;;&quot;batch&quot;;&quot;elapsed&quot;;&quot;error %&quot;;&quot;instructions&quot;;&quot;branches&quot;;&quot;branch misses&quot;;&quot;total&quot;
&quot;benchmark&quot;;&quot;std::vector&quot;;&quot;op&quot;;1;6.51982200647249e-09;8.26465858909014e-05;23.0034662045061;5;0.00116867939228672;0.000171959
</pre></div>
</div>
<p>Nanobench comes with a few preconfigured templates, residing in the namespace <code class="docutils literal notranslate"><span class="pre">ankerl::nanobench::templates</span></code>. To demonstrate what these templates can do,
here is an simple example that benchmarks two random generators <code class="docutils literal notranslate"><span class="pre">std::mt19937_64</span></code> and <code class="docutils literal notranslate"><span class="pre">std::knuth_b</span></code> and prints both the template and the rendered
output:</p>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nanobench.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thirdparty/doctest/doctest.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;random&gt;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="p">{</span>

<span class="kt">void</span> <span class="n">gen</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">typeName</span><span class="p">,</span> <span class="kt">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">mustacheTemplate</span><span class="p">,</span>
         <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">bench</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">std</span><span class="o">::</span><span class="n">ofstream</span> <span class="n">templateOut</span><span class="p">(</span><span class="s">&quot;mustache.template.&quot;</span> <span class="o">+</span> <span class="n">typeName</span><span class="p">);</span>
    <span class="n">templateOut</span> <span class="o">&lt;&lt;</span> <span class="n">mustacheTemplate</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">ofstream</span> <span class="n">renderOut</span><span class="p">(</span><span class="s">&quot;mustache.render.&quot;</span> <span class="o">+</span> <span class="n">typeName</span><span class="p">);</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">render</span><span class="p">(</span><span class="n">mustacheTemplate</span><span class="p">,</span> <span class="n">bench</span><span class="p">,</span> <span class="n">renderOut</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">}</span> <span class="c1">// namespace</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;tutorial_mustache&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">Bench</span> <span class="n">bench</span><span class="p">;</span>
    <span class="n">bench</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">&quot;Benchmarking std::mt19937_64 and std::knuth_b&quot;</span><span class="p">);</span>

    <span class="n">std</span><span class="o">::</span><span class="n">mt19937_64</span> <span class="n">rng1</span><span class="p">;</span>
    <span class="n">bench</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;std::mt19937_64&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]</span> <span class="p">{</span>
        <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">doNotOptimizeAway</span><span class="p">(</span><span class="n">rng1</span><span class="p">());</span>
    <span class="p">});</span>

    <span class="n">std</span><span class="o">::</span><span class="n">knuth_b</span> <span class="n">rng2</span><span class="p">;</span>
    <span class="n">bench</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;std::knuth_b&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]</span> <span class="p">{</span>
        <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">doNotOptimizeAway</span><span class="p">(</span><span class="n">rng2</span><span class="p">());</span>
    <span class="p">});</span>

    <span class="n">gen</span><span class="p">(</span><span class="s">&quot;json&quot;</span><span class="p">,</span> <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">templates</span><span class="o">::</span><span class="n">json</span><span class="p">(),</span> <span class="n">bench</span><span class="p">);</span>
    <span class="n">gen</span><span class="p">(</span><span class="s">&quot;html&quot;</span><span class="p">,</span> <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">templates</span><span class="o">::</span><span class="n">htmlBoxplot</span><span class="p">(),</span> <span class="n">bench</span><span class="p">);</span>
    <span class="n">gen</span><span class="p">(</span><span class="s">&quot;csv&quot;</span><span class="p">,</span> <span class="n">ankerl</span><span class="o">::</span><span class="n">nanobench</span><span class="o">::</span><span class="n">templates</span><span class="o">::</span><span class="n">csv</span><span class="p">(),</span> <span class="n">bench</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="csv-comma-separated-values">
<span id="tutorial-template-csv"></span><h2>CSV - Comma-Separated Values<a class="headerlink" href="#csv-comma-separated-values" title="Permalink to this headline">¶</a></h2>
<p>The function <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench9templates3csvEv" title="ankerl::nanobench::templates::csv"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ankerl::nanobench::templates::csv()</span></code></a> provides this template:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>&quot;title&quot;;&quot;name&quot;;&quot;unit&quot;;&quot;batch&quot;;&quot;elapsed&quot;;&quot;error %&quot;;&quot;instructions&quot;;&quot;branches&quot;;&quot;branch misses&quot;;&quot;total&quot;
{{#result}}&quot;{{title}}&quot;;&quot;{{name}}&quot;;&quot;{{unit}}&quot;;{{batch}};{{median(elapsed)}};{{medianAbsolutePercentError(elapsed)}};{{median(instructions)}};{{median(branchinstructions)}};{{median(branchmisses)}};{{sumProduct(iterations, elapsed)}}
{{/result}}
</pre></div>
</td></tr></table></div>
<p>This generates a compact CSV file, where entries are separated by a semicolon <cite>;</cite>. Run with the example, I get this output:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>&quot;title&quot;;&quot;name&quot;;&quot;unit&quot;;&quot;batch&quot;;&quot;elapsed&quot;;&quot;error %&quot;;&quot;instructions&quot;;&quot;branches&quot;;&quot;branch misses&quot;;&quot;total&quot;
&quot;Benchmarking std::mt19937_64 and std::knuth_b&quot;;&quot;std::mt19937_64&quot;;&quot;op&quot;;1;2.54441805225653e-08;0.0236579384033733;125.989678899083;16.7645714285714;0.564133016627078;0.000218811
&quot;Benchmarking std::mt19937_64 and std::knuth_b&quot;;&quot;std::knuth_b&quot;;&quot;op&quot;;1;3.19013867488444e-08;0.00091350764819687;170.013008130081;28;0.0031104199066874;0.000217248
</pre></div>
</td></tr></table></div>
<p>Rendered as CSV table:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>title</p></th>
<th class="head"><p>name</p></th>
<th class="head"><p>unit</p></th>
<th class="head"><p>batch</p></th>
<th class="head"><p>elapsed</p></th>
<th class="head"><p>error %</p></th>
<th class="head"><p>instructions</p></th>
<th class="head"><p>branches</p></th>
<th class="head"><p>branch misses</p></th>
<th class="head"><p>total</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Benchmarking std::mt19937_64 and std::knuth_b</p></td>
<td><p>std::mt19937_64</p></td>
<td><p>op</p></td>
<td><p>1</p></td>
<td><p>2.54441805225653e-08</p></td>
<td><p>0.0236579384033733</p></td>
<td><p>125.989678899083</p></td>
<td><p>16.7645714285714</p></td>
<td><p>0.564133016627078</p></td>
<td><p>0.000218811</p></td>
</tr>
<tr class="row-odd"><td><p>Benchmarking std::mt19937_64 and std::knuth_b</p></td>
<td><p>std::knuth_b</p></td>
<td><p>op</p></td>
<td><p>1</p></td>
<td><p>3.19013867488444e-08</p></td>
<td><p>0.00091350764819687</p></td>
<td><p>170.013008130081</p></td>
<td><p>28</p></td>
<td><p>0.0031104199066874</p></td>
<td><p>0.000217248</p></td>
</tr>
</tbody>
</table>
<p>Note that the CSV template doesn’t provide all the data that is available.</p>
</div>
<div class="section" id="html-box-plots">
<span id="tutorial-template-html"></span><h2>HTML Box Plots<a class="headerlink" href="#html-box-plots" title="Permalink to this headline">¶</a></h2>
<p>With the template <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench9templates11htmlBoxplotEv" title="ankerl::nanobench::templates::htmlBoxplot"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ankerl::nanobench::templates::htmlBoxplot()</span></code></a> you get a <a class="reference external" href="https://plotly.com/javascript/">plotly</a> based HTML output which generates
an boxplot of the runtime. The template is rather simple.</p>
<div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">&lt;html&gt;</span>

<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;script</span> <span class="na">src=</span><span class="s">&quot;https://cdn.plot.ly/plotly-latest.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;myDiv&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script&gt;</span>
        var data = [
            {{#result}}{
                name: &#39;{{name}}&#39;,
                y: [{{#measurement}}{{elapsed}}{{^-last}}, {{/last}}{{/measurement}}],
            },
            {{/result}}
        ];
        var title = &#39;{{title}}&#39;;

        data = data.map(a =&gt; Object.assign(a, { boxpoints: &#39;all&#39;, pointpos: 0, type: &#39;box&#39; }));
        var layout = { title: { text: title }, showlegend: false, yaxis: { title: &#39;time per unit&#39;, rangemode: &#39;tozero&#39;, autorange: true } }; Plotly.newPlot(&#39;myDiv&#39;, data, layout, {responsive: true});
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</pre></div>
</td></tr></table></div>
<p>This generates a nice interactive boxplot, which gives a nice visual showcase of the runtime performance of the evaluated benchmarks. Each epoch is visualized as a dot,
and the boxplot itself shows median, percentiles, and outliers. You’ll might want to increase the default number of epochs for an even better visualization result.</p>
<html>

<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
    <div id="myDiv"></div>
    <script>
        var data = [
            {
                name: 'std::mt19937_64',
                y: [2.54708571428571e-08, 2.58467243510507e-08, 2.24097693351425e-08, 2.53405963302752e-08, 2.59256594724221e-08, 2.25310880829016e-08, 2.54441805225653e-08, 2.20126262626263e-08, 2.63870541611625e-08, 2.23305882352941e-08, 2.60607235142119e-08],
            },
            {
                name: 'std::knuth_b',
                y: [3.2137323943662e-08, 3.19305555555556e-08, 3.18973561430793e-08, 3.1912013536379e-08, 3.19049034175334e-08, 3.19013867488444e-08, 3.18547854785479e-08, 3.18769230769231e-08, 3.18520325203252e-08, 3.18618307426598e-08, 3.19558599695586e-08],
            },
            
        ];
        var title = 'Benchmarking std::mt19937_64 and std::knuth_b';

        data = data.map(a => Object.assign(a, { boxpoints: 'all', pointpos: 0, type: 'box' }));
        var layout = { title: { text: title }, showlegend: false, yaxis: { title: 'time per unit', rangemode: 'tozero', autorange: true } }; Plotly.newPlot('myDiv', data, layout, {responsive: true});
    </script>
</body>

</html></div>
<div class="section" id="json-javascript-object-notation">
<span id="tutorial-template-json"></span><h2>JSON - JavaScript Object Notation<a class="headerlink" href="#json-javascript-object-notation" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench9templates4jsonEv" title="ankerl::nanobench::templates::json"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ankerl::nanobench::templates::json()</span></code></a> template gives everything, all data that is available, from all runs. The template is therefore quite complex:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre></div></td><td class="code"><div class="highlight"><pre><span></span>{
    &quot;results&quot;: [
{{#result}}        {
            &quot;title&quot;: &quot;{{title}}&quot;,
            &quot;name&quot;: &quot;{{name}}&quot;,
            &quot;unit&quot;: &quot;{{unit}}&quot;,
            &quot;batch&quot;: {{batch}},
            &quot;complexityN&quot;: {{complexityN}},
            &quot;epochs&quot;: {{epochs}},
            &quot;clockResolution&quot;: {{clockResolution}},
            &quot;clockResolutionMultiple&quot;: {{clockResolutionMultiple}},
            &quot;maxEpochTime&quot;: {{maxEpochTime}},
            &quot;minEpochTime&quot;: {{minEpochTime}},
            &quot;minEpochIterations&quot;: {{minEpochIterations}},
            &quot;warmup&quot;: {{warmup}},
            &quot;relative&quot;: {{relative}},
            &quot;median(elapsed)&quot;: {{median(elapsed)}},
            &quot;medianAbsolutePercentError(elapsed)&quot;: {{medianAbsolutePercentError(elapsed)}},
            &quot;median(instructions)&quot;: {{median(instructions)}},
            &quot;medianAbsolutePercentError(instructions)&quot;: {{medianAbsolutePercentError(instructions)}},
            &quot;median(cpucycles)&quot;: {{median(cpucycles)}},
            &quot;median(contextswitches)&quot;: {{median(contextswitches)}},
            &quot;median(pagefaults)&quot;: {{median(pagefaults)}},
            &quot;median(branchinstructions)&quot;: {{median(branchinstructions)}},
            &quot;median(branchmisses)&quot;: {{median(branchmisses)}},
            &quot;totalTime&quot;: {{sumProduct(iterations, elapsed)}},
            &quot;measurements&quot;: [
{{#measurement}}                {
                    &quot;iterations&quot;: {{iterations}},
                    &quot;elapsed&quot;: {{elapsed}},
                    &quot;pagefaults&quot;: {{pagefaults}},
                    &quot;cpucycles&quot;: {{cpucycles}},
                    &quot;contextswitches&quot;: {{contextswitches}},
                    &quot;instructions&quot;: {{instructions}},
                    &quot;branchinstructions&quot;: {{branchinstructions}},
                    &quot;branchmisses&quot;: {{branchmisses}}
                }{{^-last}},{{/-last}}
{{/measurement}}            ]
        }{{^-last}},{{/-last}}
{{/result}}    ]
}
</pre></div>
</td></tr></table></div>
<p>This also gives the data from each separate <a class="reference internal" href="reference.html#_CPPv4N6ankerl9nanobench5Bench6epochsE6size_t" title="ankerl::nanobench::Bench::epochs"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ankerl::nanobench::Bench::epochs()</span></code></a>, not just the accumulated data as in the CSV template.</p>
<div class="highlight-json notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Benchmarking std::mt19937_64 and std::knuth_b&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;std::mt19937_64&quot;</span><span class="p">,</span>
            <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;op&quot;</span><span class="p">,</span>
            <span class="nt">&quot;batch&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;complexityN&quot;</span><span class="p">:</span> <span class="mi">-1</span><span class="p">,</span>
            <span class="nt">&quot;epochs&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
            <span class="nt">&quot;clockResolution&quot;</span><span class="p">:</span> <span class="mf">1.8e-08</span><span class="p">,</span>
            <span class="nt">&quot;clockResolutionMultiple&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
            <span class="nt">&quot;maxEpochTime&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
            <span class="nt">&quot;minEpochTime&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;minEpochIterations&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;warmup&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;relative&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;median(elapsed)&quot;</span><span class="p">:</span> <span class="mf">2.54441805225653e-08</span><span class="p">,</span>
            <span class="nt">&quot;medianAbsolutePercentError(elapsed)&quot;</span><span class="p">:</span> <span class="mf">0.0236579384033733</span><span class="p">,</span>
            <span class="nt">&quot;median(instructions)&quot;</span><span class="p">:</span> <span class="mf">125.989678899083</span><span class="p">,</span>
            <span class="nt">&quot;medianAbsolutePercentError(instructions)&quot;</span><span class="p">:</span> <span class="mf">0.035125448044942</span><span class="p">,</span>
            <span class="nt">&quot;median(cpucycles)&quot;</span><span class="p">:</span> <span class="mf">81.3479809976247</span><span class="p">,</span>
            <span class="nt">&quot;median(contextswitches)&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;median(pagefaults)&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;median(branchinstructions)&quot;</span><span class="p">:</span> <span class="mf">16.7645714285714</span><span class="p">,</span>
            <span class="nt">&quot;median(branchmisses)&quot;</span><span class="p">:</span> <span class="mf">0.564133016627078</span><span class="p">,</span>
            <span class="nt">&quot;totalTime&quot;</span><span class="p">:</span> <span class="mf">0.000218811</span><span class="p">,</span>
            <span class="nt">&quot;measurements&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">875</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.54708571428571e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">81.472</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">125.885714285714</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">16.7645714285714</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.574857142857143</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">809</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.58467243510507e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">82.5290482076638</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">128.771322620519</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">17.0296662546354</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.582200247218789</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">737</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.24097693351425e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">71.6431478968792</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">118.374491180461</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">15.9470827679783</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.417910447761194</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">872</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.53405963302752e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">80.9896788990826</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">125.989678899083</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">16.7580275229358</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.563073394495413</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">834</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.59256594724221e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">82.7661870503597</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">127.635491606715</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">16.9352517985612</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.575539568345324</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">772</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.25310880829016e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">72.0129533678757</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">117.108808290155</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">15.8341968911917</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.405440414507772</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">842</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.54441805225653e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">81.3479809976247</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">127.266033254157</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">16.8859857482185</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.564133016627078</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">792</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.20126262626263e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">70.3623737373737</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">116.420454545455</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">15.7588383838384</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.396464646464646</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">757</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.63870541611625e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">84.332892998679</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">131.462351387054</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">17.334214002642</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.618229854689564</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">850</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.23305882352941e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">71.3505882352941</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">114.629411764706</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">15.5823529411765</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.392941176470588</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">774</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">2.60607235142119e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">83.1679586563308</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">130.576227390181</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mf">17.2635658914729</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.590439276485788</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Benchmarking std::mt19937_64 and std::knuth_b&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;std::knuth_b&quot;</span><span class="p">,</span>
            <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;op&quot;</span><span class="p">,</span>
            <span class="nt">&quot;batch&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;complexityN&quot;</span><span class="p">:</span> <span class="mi">-1</span><span class="p">,</span>
            <span class="nt">&quot;epochs&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
            <span class="nt">&quot;clockResolution&quot;</span><span class="p">:</span> <span class="mf">1.8e-08</span><span class="p">,</span>
            <span class="nt">&quot;clockResolutionMultiple&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
            <span class="nt">&quot;maxEpochTime&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
            <span class="nt">&quot;minEpochTime&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;minEpochIterations&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;warmup&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;relative&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;median(elapsed)&quot;</span><span class="p">:</span> <span class="mf">3.19013867488444e-08</span><span class="p">,</span>
            <span class="nt">&quot;medianAbsolutePercentError(elapsed)&quot;</span><span class="p">:</span> <span class="mf">0.00091350764819687</span><span class="p">,</span>
            <span class="nt">&quot;median(instructions)&quot;</span><span class="p">:</span> <span class="mf">170.013008130081</span><span class="p">,</span>
            <span class="nt">&quot;medianAbsolutePercentError(instructions)&quot;</span><span class="p">:</span> <span class="mf">4.11992392254248e-06</span><span class="p">,</span>
            <span class="nt">&quot;median(cpucycles)&quot;</span><span class="p">:</span> <span class="mf">101.973254086181</span><span class="p">,</span>
            <span class="nt">&quot;median(contextswitches)&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;median(pagefaults)&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;median(branchinstructions)&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
            <span class="nt">&quot;median(branchmisses)&quot;</span><span class="p">:</span> <span class="mf">0.0031104199066874</span><span class="p">,</span>
            <span class="nt">&quot;totalTime&quot;</span><span class="p">:</span> <span class="mf">0.000217248</span><span class="p">,</span>
            <span class="nt">&quot;measurements&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">568</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.2137323943662e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">102.55985915493</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.014084507042</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.00528169014084507</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">576</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.19305555555556e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">102.059027777778</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.013888888889</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.00347222222222222</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">643</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.18973561430793e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">101.973561430793</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.012441679627</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.0031104199066874</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">591</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.1912013536379e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">101.944162436548</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.013536379019</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.00169204737732657</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">673</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.19049034175334e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">101.973254086181</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.011887072808</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.00297176820208024</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">649</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.19013867488444e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">101.850539291217</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.012326656394</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.00308166409861325</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">606</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.18547854785479e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">101.83498349835</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.013201320132</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.0033003300330033</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">650</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.18769230769231e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">101.898461538462</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.012307692308</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.00307692307692308</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">615</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.18520325203252e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">101.858536585366</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.013008130081</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.0032520325203252</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">579</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.18618307426598e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">101.989637305699</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.013816925734</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.00345423143350604</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">657</span><span class="p">,</span>
                    <span class="nt">&quot;elapsed&quot;</span><span class="p">:</span> <span class="mf">3.19558599695586e-08</span><span class="p">,</span>
                    <span class="nt">&quot;pagefaults&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;cpucycles&quot;</span><span class="p">:</span> <span class="mf">102.229832572298</span><span class="p">,</span>
                    <span class="nt">&quot;contextswitches&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="nt">&quot;instructions&quot;</span><span class="p">:</span> <span class="mf">170.012176560122</span><span class="p">,</span>
                    <span class="nt">&quot;branchinstructions&quot;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
                    <span class="nt">&quot;branchmisses&quot;</span><span class="p">:</span> <span class="mf">0.0030441400304414</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="comparison.html" class="btn btn-neutral float-right" title="Test Set" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="nanobench" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-2020 Martin Ankerl &lt;martin.ankerl@gmail.com&gt;

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-36863101-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>